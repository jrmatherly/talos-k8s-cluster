---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: victoria-logs
spec:
  chartRef:
    kind: OCIRepository
    name: victoria-logs-single
  interval: 1h
  values:
    fullnameOverride: victoria-logs
    server:
      enabled: true
      persistentVolume:
        enabled: true
        storageClass: "proxmox-csi"
        size: "20Gi"
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
        limits:
          cpu: "500m"
          memory: "1Gi"
      extraArgs:
        retentionPeriod: "14d"
        memory.allowedPercent: "80"
      service:
        servicePort: 9428
        type: ClusterIP
    fluent-bit:
      enabled: false
