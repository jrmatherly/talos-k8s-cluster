#% if agentgateway_addr is defined and azure_anthropic_api_key is defined %#
---
apiVersion: gateway.kgateway.dev/v1alpha1
kind: Backend
metadata:
  name: azure-anthropic
  labels:
    cost-center: ai-gateway
    provider: azure-anthropic
    region: eastus2
    model-type: chat
    app.kubernetes.io/name: azure-anthropic
    app.kubernetes.io/component: ai-backend
    app.kubernetes.io/part-of: ai-system
spec:
  type: AI
  ai:
    llm:
      anthropic:
        authToken:
          kind: SecretRef
          secretRef:
            name: azure-anthropic-credentials
        apiVersion: "2023-06-01"
        model: "claude-sonnet-4-5-20250929"
      #| Override host/port to Azure AI Foundry endpoint #|
      #| Path transformation handled by HTTPRoute URLRewrite filter #|
      host: "#{ azure_anthropic_resource_name }#.services.ai.azure.com"
      port: 443
#% endif %#
