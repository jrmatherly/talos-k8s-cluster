#% if agentgateway_addr is defined and azure_cohere_embed_api_key is defined %#
---
#| AgentgatewayBackend (static) for Cohere Embed (kgateway v2.2+) #|
#| Uses Azure AI Services OpenAI-compatible endpoint #|
apiVersion: agentgateway.dev/v1alpha1
kind: AgentgatewayBackend
metadata:
  name: azure-cohere-embed
  labels:
    cost-center: ai-gateway
    provider: azure-cohere
    region: eastus
    model-type: embed
    app.kubernetes.io/name: azure-cohere-embed
    app.kubernetes.io/component: ai-backend
    app.kubernetes.io/part-of: ai-system
spec:
  static:
    host: "#{ azure_cohere_embed_host | default('aaronsai.services.ai.azure.com') }#"
    port: 443
  policies:
    auth:
      secretRef:
        name: azure-cohere-embed-credentials
    tls:
      sni: "#{ azure_cohere_embed_host | default('aaronsai.services.ai.azure.com') }#"
#% endif %#
