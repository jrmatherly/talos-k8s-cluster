#% if cognee_enabled | default(false) %#
---
#| NOTE: Neo4j authentication moved to storage namespace (neo4j-secrets Secret).
   This secret now only contains PostgreSQL/Cognee database credentials. #|
apiVersion: v1
kind: Secret
metadata:
  name: cognee-secrets
type: Opaque
stringData:
#% if cognee_dedicated_db | default(false) %#
  # Cognee dedicated database connection string
  COGNEE_DB_PASSWORD: "#{ cognee_db_password }#"
  COGNEE_DB_DSN: "postgresql://cognee:#{ cognee_db_password }#@cognee-db-rw.ai-system.svc.cluster.local:5432/#{ cognee_db_name | default('cognee') }#"
#% else %#
  # Cognee using obot-db shared database connection string
  COGNEE_DB_PASSWORD: "#{ obot_postgres_password }#"
  COGNEE_DB_DSN: "postgresql://obot:#{ obot_postgres_password }#@obot-db-rw.obot.svc.cluster.local:5432/#{ cognee_db_name | default('cognee') }#"
#% endif %#
#% endif %#
