#% set ai_gateway_has_backends = envoy_ai_gateway_enabled and (azure_openai_us_east_api_key or azure_openai_us_east2_api_key) %#
#% set mcp_gateway_has_servers = mcp_gateway_enabled | default(false) and mcp_gateway_addr %#
#% if ai_gateway_has_backends or mcp_gateway_has_servers %#
---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: ai-system

components:
  - ../../components/sops

resources:
  - ./namespace.yaml
#% if azure_openai_us_east_api_key %#
  - ./azure-openai-us-east/ks.yaml
#% endif %#
#% if azure_openai_us_east2_api_key %#
  - ./azure-openai-us-east2/ks.yaml
#% endif %#
#% if mcp_gateway_has_servers %#
  - ./mcp-servers/context7/ks.yaml
#% endif %#
#% endif %#
