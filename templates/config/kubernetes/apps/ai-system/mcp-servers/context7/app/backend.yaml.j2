#% if agentgateway_enabled | default(false) %#
---
#| ============================================================ #|
#| Backend for Context7 external MCP server                      #|
#| Provides HTTPS proxy routing to context7.upstash.io           #|
#| NOTE: MCP tool filtering is not supported for external        #|
#| services - use the Context7 MCP plugin directly for full      #|
#| MCP protocol support.                                         #|
#| ============================================================ #|
apiVersion: gateway.kgateway.dev/v1alpha1
kind: Backend
metadata:
  name: context7-mcp
spec:
  type: Static
  static:
    hosts:
      - host: context7.upstash.io
        port: 443
---
#| BackendTLSPolicy for TLS validation to context7.upstash.io #|
apiVersion: gateway.networking.k8s.io/v1alpha3
kind: BackendTLSPolicy
metadata:
  name: context7-mcp-tls
spec:
  targetRefs:
    - group: gateway.kgateway.dev
      kind: Backend
      name: context7-mcp
  validation:
    wellKnownCACertificates: System
    hostname: context7.upstash.io
#% endif %#
