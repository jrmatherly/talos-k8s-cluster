#% if victoria_metrics_enabled %#
---
#| Observability Stack - VictoriaMetrics based #|
#| NOTE: Legacy kube-prometheus-stack moved to archive/ #|
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: observability

components:
  - ../../components/sops

resources:
  - ./namespace.yaml
  - ./victoria-metrics/ks.yaml
#% if victoria_logs_enabled %#
  - ./victoria-logs/ks.yaml
#% endif %#
#% if vector_enabled | default(victoria_logs_enabled) %#
  - ./vector/ks.yaml
#% endif %#
#% if opentelemetry_operator_enabled | default(victoria_logs_enabled) %#
  - ./opentelemetry-operator/ks.yaml
#% endif %#
#% if opentelemetry_k8s_events_enabled | default(victoria_logs_enabled) %#
  - ./opentelemetry-k8s-events/ks.yaml
#% endif %#
#% if tempo_enabled %#
  - ./tempo/ks.yaml
#% endif %#
#% if minio_enabled %#
  - ./minio-dashboards/ks.yaml
#% endif %#
#% if obot_enabled and tempo_enabled %#
  - ./obot-dashboards/ks.yaml
#% endif %#
#% if unifi_enabled %#
  - ./unpoller/ks.yaml
#% endif %#
#% endif %#

