#| Keycloak OIDC client secret for Envoy Gateway SecurityPolicy #|
#| Used by oidc-keycloak unified policy for all identity federation #|
#% if mcp_gateway_enabled and oidc_enabled %#
---
apiVersion: v1
kind: Secret
metadata:
  name: keycloak-oidc-client-secret
  labels:
    app.kubernetes.io/part-of: mcp-gateway
type: Opaque
stringData:
  client-secret: #{ keycloak_oidc_client_secret | default(keycloak_admin_password) }#
---
#| HMAC secret for signing OIDC session cookies #|
apiVersion: v1
kind: Secret
metadata:
  name: envoy-oidc-hmac
  labels:
    app.kubernetes.io/part-of: mcp-gateway
type: Opaque
stringData:
  hmac-secret: #{ oidc_hmac_secret | default(keycloak_admin_password ~ '_hmac_' ~ primary_domain) }#
#% endif %#
