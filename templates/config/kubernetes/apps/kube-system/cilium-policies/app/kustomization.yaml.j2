---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  #| ================================================ #|
  #| Tier 1: Core Infrastructure (always deployed)    #|
  #| ================================================ #|
  - ./tier1-dns-visibility.yaml
  - ./tier1-kube-api-egress.yaml
  - ./tier1-kubelet-probes.yaml
#% if victoria_metrics_enabled %#
  - ./tier1-metrics-scraping.yaml
  - ./tier1-metrics-ingress.yaml
#% endif %#
  #| ================================================ #|
  #| Tier 2: Gateway Infrastructure (always deployed) #|
  #| ================================================ #|
  - ./tier2-loadbalancer-ingress.yaml
  - ./tier2-gateway-egress.yaml
