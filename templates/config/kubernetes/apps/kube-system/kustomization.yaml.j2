---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: kube-system

components:
  - ../../components/sops

resources:
  - ./namespace.yaml
  - ./cilium/ks.yaml
  - ./coredns/ks.yaml
  - ./metrics-server/ks.yaml
  - ./reloader/ks.yaml
#% if spegel_enabled %#
  - ./spegel/ks.yaml
#% endif %#
#| ============================================================ #|
#| Gateway API CRDs - foundation for kgateway and agentgateway   #|
#| ============================================================ #|
#% if kgateway_enabled | default(true) or agentgateway_enabled | default(true) %#
  - ./gateway-api-crds/ks.yaml
#% endif %#
