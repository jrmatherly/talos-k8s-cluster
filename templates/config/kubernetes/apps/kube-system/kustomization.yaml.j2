---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: kube-system

components:
  - ../../components/sops

resources:
  - ./namespace.yaml
#% if cilium_use_prerelease %#
  - ./cilium-prerelease/ks.yaml
#% else %#
  - ./cilium/ks.yaml
#% endif %#
  - ./coredns/ks.yaml
  - ./metrics-server/ks.yaml
  - ./reloader/ks.yaml
#% if spegel_enabled %#
  - ./spegel/ks.yaml
#% endif %#
#| ============================================================ #|
#| Gateway API CRDs - foundation for kgateway and agentgateway  #|
#| Required for experimental kgateway features                  #|
#| REF: https://gateway-api.sigs.k8s.io/guides/getting-started/ #|
#| ============================================================ #|
#% if kgateway_enabled | default(true) or agentgateway_enabled | default(true) %#
  - ./gateway-api-crds/ks.yaml
#% endif %#
