---
# ==============================================================================
# CLUSTER CONFIGURATION
# ==============================================================================
# This file defines the core settings for your Talos Kubernetes cluster.
# Fill in the REQUIRED fields and optionally customize the others.
#
# TIP: Use 'task configure' to validate and render your configuration.
# ==============================================================================

# ==============================================================================
# NETWORK CONFIGURATION
# ==============================================================================

# -- The network CIDR that contains your node IP addresses.
#    This is the subnet where your Talos nodes will be assigned IPs.
#    (REQUIRED)
#    Example: "192.168.1.0/24" for a typical home network
#    Example: "10.0.0.0/24" for a private network
node_cidr: ""

# -- DNS servers for the Talos nodes to use for external resolution.
#    These are used by the nodes themselves, not for cluster DNS.
#    Public DNS servers from this list are also used as fallback for k8s_gateway.
#    (OPTIONAL) / (DEFAULT: ["1.1.1.1", "1.0.0.1"] - Cloudflare DNS)
#    Example: ["192.168.1.1", "1.1.1.1"] - Local router + Cloudflare
#    Example: ["172.64.36.x", "172.64.36.x"] - Cloudflare for Personal Resolvers
# node_dns_servers: []

# -- NTP servers for time synchronization on Talos nodes.
#    Accurate time is critical for certificate validation and cluster operations.
#    (OPTIONAL) / (DEFAULT: ["162.159.200.1", "162.159.200.123"] - Cloudflare NTP)
# node_ntp_servers: []

# -- The default gateway (router) IP for the nodes.
#    (OPTIONAL) / (DEFAULT: First usable IP in node_cidr, e.g., .1)
#    Only set this if your gateway is NOT the first IP in your subnet.
#    Example: "192.168.1.254" if your router uses .254 instead of .1
# node_default_gateway: ""

# -- VLAN tag for Talos node network interfaces.
#    Only needed if your nodes are on a tagged VLAN and your switch ports are NOT tagged.
#    (OPTIONAL) / (REF: https://www.talos.dev/latest/advanced/advanced-networking/#vlans)
#    Example: "100" for VLAN ID 100
# node_vlan_tag: ""

# ==============================================================================
# KUBERNETES CLUSTER SETTINGS
# ==============================================================================

# -- Virtual IP address for the Kubernetes API server.
#    This IP is shared across control plane nodes for high availability.
#    (REQUIRED) - Must be an UNUSED IP within node_cidr
#    TIP: Choose an IP outside the range you'll assign to nodes.
#    Example: If nodes are .101-.106, use .100 for the API
cluster_api_addr: ""

# -- Additional hostnames/IPs to include in the API server certificate.
#    Useful if you want to access the cluster by hostname or external IP.
#    (OPTIONAL)
#    Example: ["k8s.example.com", "192.168.1.200"]
# cluster_api_tls_sans: []

# -- Pod network CIDR for internal pod-to-pod communication.
#    Must NOT overlap with node_cidr or cluster_svc_cidr.
#    (OPTIONAL) / (DEFAULT: "10.42.0.0/16" - 65,536 pod IPs)
#    WARNING: Changing this after cluster creation requires a full rebuild.
# cluster_pod_cidr: ""

# -- Service network CIDR for Kubernetes ClusterIP services.
#    Must NOT overlap with node_cidr or cluster_pod_cidr.
#    (OPTIONAL) / (DEFAULT: "10.43.0.0/16" - 65,536 service IPs)
#    WARNING: Changing this after cluster creation requires a full rebuild.
# cluster_svc_cidr: ""

# ==============================================================================
# LOAD BALANCER IPS (Cilium L2/BGP Announcements)
# ==============================================================================
# These IPs are announced by Cilium and used for LoadBalancer services.
# All must be UNUSED IPs within node_cidr.

# -- IP for k8s_gateway DNS service (internal DNS resolution).
#    Configure your router/DNS server to forward your domain queries here.
#    This enables split-DNS so internal services resolve to internal IPs.
#    (REQUIRED) - Must be an UNUSED IP within node_cidr
#    TIP: See docs/udm-split-dns.md for router configuration examples.
cluster_dns_gateway_addr: ""

# -- IP for the internal ingress gateway (envoy-internal).
#    Used for services only accessible from your local network.
#    (REQUIRED) - Must be an UNUSED IP within node_cidr
cluster_gateway_addr: ""

# -- IP for the external ingress gateway (envoy-external via Cloudflare Tunnel).
#    Used for services accessible from the public internet.
#    (REQUIRED) - Must be an UNUSED IP within node_cidr
cloudflare_gateway_addr: ""

# -- Load balancer IP for the AI Gateway.
#    (REQUIRED if envoy_ai_gateway_enabled) - Must be an UNUSED IP within node_cidr
#    Example: "192.168.1.145"
# envoy_ai_gateway_addr: ""

# -- Load balancer IP for the MCP Gateway.
#    (REQUIRED if mcp_gateway_enabled) - Must be an UNUSED IP within node_cidr
#    Example: "192.168.1.146"
# mcp_gateway_addr: ""

# ==============================================================================
# GITHUB REPOSITORY SETTINGS
# ==============================================================================

# -- Your GitHub repository in "owner/repo" format.
#    This is where Flux will sync cluster state from.
#    (REQUIRED)
#    Example: "myusername/my-k8s-cluster"
repository_name: ""

# -- Git branch for Flux to monitor.
#    (OPTIONAL) / (DEFAULT: "main")
# repository_branch: ""

# -- Repository visibility setting.
#    (OPTIONAL) / (DEFAULT: "public")
#    NOTE: If "private", you must add github-deploy.key.pub to your repo's deploy keys.
#    See README for detailed instructions.
# repository_visibility: ""

# ==============================================================================
# CLOUDFLARE SETTINGS
# ==============================================================================

# -- Your Cloudflare domain(s) for the cluster.
#    Can be a single domain string or an array of domains.
#    First domain is primary (used for flux-webhook, internal infrastructure).
#    (REQUIRED)
#    Single domain example: ["example.com"]
#    Multiple domains example: ["example.com", "example.org"]
#
#    In templates, domains are available as:
#      ${SECRET_DOMAIN}   - Primary domain (first in list)
#      ${SECRET_DOMAIN_2} - Second domain
#      ${SECRET_DOMAIN_3} - Third domain, etc.
cloudflare_domains: []

# -- Cloudflare API Token with required permissions.
#    (REQUIRED) - See README "Stage 3: Cloudflare configuration" for creation steps.
#    Required permissions:
#      - Zone:DNS:Edit (from template)
#      - Account:Cloudflare Tunnel:Read (add manually)
#    TIP: Create token at: Cloudflare Portal → Manage Account → Account API Tokens
cloudflare_token: ""
# ==============================================================================
# CILIUM NETWORKING (Advanced)
# ==============================================================================

# -- Load balancer mode for Cilium.
#    DSR (Direct Server Return) is more efficient but requires compatible network.
#    SNAT works in all environments but adds latency.
#    (OPTIONAL) / (DEFAULT: "dsr")
#    Values: "dsr" or "snat"
#    REF: https://docs.cilium.io/en/stable/network/kubernetes/kubeproxy-free/
# cilium_loadbalancer_mode: ""

# -- BGP Configuration (for advanced networking setups)
#    Enable BGP peering with your router for dynamic route advertisement.
#    All three BGP settings must be configured together to enable BGP.
#    (OPTIONAL) - Only needed if your router supports BGP
#    REF: https://docs.cilium.io/en/latest/network/bgp-control-plane/

# -- BGP router IP address (your router's IP that speaks BGP)
#    Example: "192.168.1.1"
# cilium_bgp_router_addr: ""

# -- BGP ASN for your router
#    Example: "64512"
# cilium_bgp_router_asn: ""

# -- BGP ASN for Kubernetes nodes
#    Example: "64513"
# cilium_bgp_node_asn: ""

# ==============================================================================
# CONTROL PLANE SCHEDULING
# ==============================================================================

# -- Allow scheduling workloads on control plane nodes.
#    When true, removes the node-role.kubernetes.io/control-plane:NoSchedule taint
#    from control plane nodes, allowing regular workloads to run there.
#    When false, only system components with tolerations can run on control planes.
#    (OPTIONAL) / (DEFAULT: true)
#    TIP: Set to true if you have limited nodes and want to maximize resources.
#    TIP: Set to false for production clusters with dedicated worker nodes.
# allow_scheduling_on_control_planes: true

# ==============================================================================
# PROXMOX INTEGRATION (Optional)
# ==============================================================================
# Configuration for Proxmox CSI Plugin (and optionally CCM).
# Required if deploying persistent storage via Proxmox CSI.
# REF: docs/proxmox-csi-implementation.md

# -- Proxmox API URL for CSI (and CCM if using Approach B) communication.
#    (REQUIRED for Proxmox integration)
#    Example: "https://192.168.1.10:8006/api2/json"
# proxmox_api_url: ""

# -- Skip TLS certificate verification for self-signed Proxmox certs.
#    (OPTIONAL) / (DEFAULT: true)
# proxmox_insecure: true

# -- Proxmox region name (identifies the Proxmox cluster).
#    Used for topology.kubernetes.io/region label.
#    (OPTIONAL) / (DEFAULT: "talos-k8s")
# proxmox_region: ""

# -- Proxmox storage pool name for CSI volumes.
#    Must support disk images (e.g., local-lvm, local-zfs, ceph).
#    (OPTIONAL) / (DEFAULT: "local-lvm")
# proxmox_storage: ""

# -- Proxmox CSI API Token ID (from step 1.4 of implementation guide)
#    (REQUIRED for CSI) Format: "user@realm!token-name"
#    Example: "kubernetes-csi@pve!csi"
# proxmox_csi_token_id: ""

# -- Proxmox CSI API Token Secret
#    (REQUIRED for CSI) - The secret value from token creation
# proxmox_csi_token_secret: ""

# -- Proxmox CCM API Token ID (from step 1.3 of implementation guide)
#    (REQUIRED for Approach B only) Format: "user@realm!token-name"
#    Example: "kubernetes-ccm@pve!ccm"
#    NOTE: Skip if using Approach A (Static Labels)
# proxmox_ccm_token_id: ""

# -- Proxmox CCM API Token Secret
#    (REQUIRED for Approach B only) - The secret value from token creation
#    NOTE: Skip if using Approach A (Static Labels)
# proxmox_ccm_token_secret: ""

# ==============================================================================
# ENVOY AI GATEWAY (Optional)
# ==============================================================================
# Configuration for AI/LLM traffic routing via Envoy AI Gateway.
# This extends the existing Envoy Gateway with AI-specific capabilities.
# REF: https://aigateway.envoyproxy.io/docs/

# -- Enable Envoy AI Gateway integration.
#    (OPTIONAL) / (DEFAULT: false)
# envoy_ai_gateway_enabled: true

# ==============================================================================
# MCP GATEWAY (Optional - Model Context Protocol)
# ==============================================================================
# MCP Gateway enables hosting MCP servers with SSE/WebSocket transport.
# Creates a dedicated Gateway at mcp.<domain> for MCP server routing.
# REF: https://modelcontextprotocol.io/specification/2025-11-25/basic/authorization

# -- Enable MCP Gateway functionality.
#    (OPTIONAL) / (DEFAULT: false)
# mcp_gateway_enabled: true

# -- MCP session timeout in seconds.
#    Controls connection idle and max duration timeouts for long-running MCP operations.
#    (OPTIONAL) / (DEFAULT: 3600 - 1 hour)
# mcp_session_timeout: 3600

# ==============================================================================
# AZURE OPENAI - US EAST REGION
# ==============================================================================
# Models: gpt-4.1, gpt-4.1-nano, gpt-4o-mini, o3, o4-mini
#         text-embedding-3-small, text-embedding-ada-002

# -- Azure OpenAI US East API Key for authentication.
#    (optional) - From Azure Portal
# azure_openai_us_east_api_key: ""

# -- Azure OpenAI US East resource name (the subdomain of your endpoint).
#    (optional)
#    Example: "my-openai" for https://my-openai.openai.azure.com
# azure_openai_us_east_resource_name: ""

# ==============================================================================
# AZURE OPENAI - US EAST2 REGION
# ==============================================================================
# Models: gpt-5, gpt-5-chat, gpt-5-mini, gpt-5-nano, gpt-5.1, gpt-5.1-chat
#         gpt-5.1-codex, gpt-5.1-codex-mini, gpt-audio, gpt-audio-mini
#         text-embedding-3-large

# -- Azure OpenAI US East2 API Key for authentication.
#    (optional) - From Azure Portal
# azure_openai_us_east2_api_key: ""

# -- Azure OpenAI US East2 resource name (the subdomain of your endpoint).
#    (optional)
#    Example: "my-ai-foundry-east2" for https://my-ai-foundry-east2.openai.azure.com
# azure_openai_us_east2_resource_name: ""

# ==============================================================================
# AZURE ENTRA ID AUTHENTICATION
# ==============================================================================
# -- Azure Entra ID Authentication (optional - alternative to API key)
#    Use these for production workloads instead of API key.
# azure_tenant_id: ""
# azure_client_id: ""
# azure_client_secret: ""

# ==============================================================================
# OBSERVABILITY STACK (Optional - Prometheus/Grafana for K8s metrics)
# ==============================================================================
# Kubernetes infrastructure metrics with Prometheus and Grafana dashboards.

# -- Enable the observability stack.
#    (OPTIONAL) / (DEFAULT: false)
# observability_enabled: true

# -- Grafana admin password.
#    (OPTIONAL) / (DEFAULT: "admin")
#    WARNING: Change this for production deployments!
# grafana_admin_password: ""

# ==============================================================================
# PROMETHEUS CONFIGURATION
# ==============================================================================

# -- Prometheus data retention period.
#    (OPTIONAL) / (DEFAULT: "7d")
# prometheus_retention: "7d"

# -- Maximum storage size before old data is removed.
#    (OPTIONAL) / (DEFAULT: "45GB")
# prometheus_retention_size: "45GB"

# -- Prometheus PVC storage size.
#    (OPTIONAL) / (DEFAULT: "50Gi")
# prometheus_storage_size: "50Gi"

# -- Storage class for Prometheus and other observability PVCs.
#    (OPTIONAL) / (DEFAULT: "proxmox-csi")
# prometheus_storage_class: "proxmox-csi"

# -- Number of Prometheus replicas.
#    (OPTIONAL) / (DEFAULT: 1)
# prometheus_replicas: 1

# ==============================================================================
# ONEDEV CONFIGURATION (Optional - Git Server with CI/CD)
# ==============================================================================
# OneDev is an All-In-One DevOps Platform with Git hosting, CI/CD, and packages.
# REF: https://docs.onedev.io/installation-guide/deploy-to-k8s
# REF: docs/onedev-implementation.md

# -- Enable OneDev deployment.
#    (OPTIONAL) / (DEFAULT: false)
# onedev_enabled: true

# -- OneDev admin password (initial setup).
#    (REQUIRED if onedev_enabled) - Will be encrypted with SOPS
#    NOTE: Change this after initial setup via the web UI
# onedev_admin_password: "your-secure-password"

# -- Storage size for OneDev data PVC.
#    (OPTIONAL) / (DEFAULT: "100Gi")
#    NOTE: Size depends on repository data - minimum 3x your total repo size
# onedev_storage_size: "100Gi"

# -- Storage class for OneDev PVC.
#    (OPTIONAL) / (DEFAULT: "proxmox-csi")
# onedev_storage_class: "proxmox-csi"

# ==============================================================================
# ONEDEV EXTERNAL DATABASE (Optional)
# ==============================================================================
# If not set, uses embedded H2 database (suitable for small deployments).
# For production with many users/projects, use external MySQL/PostgreSQL.

# -- External database type.
#    (OPTIONAL) / (DEFAULT: embedded H2)
#    Options: "mysql", "postgresql", "mariadb", "mssql"
# onedev_database_type: "mysql"

# -- External database host.
#    (REQUIRED if onedev_database_type is set)
#    Example: "mysql.database.svc" or "192.168.1.50"
# onedev_database_host: ""

# -- External database port.
#    (OPTIONAL) / (DEFAULT: "3306")
# onedev_database_port: "3306"

# -- External database name.
#    (OPTIONAL) / (DEFAULT: "onedev")
# onedev_database_name: "onedev"

# -- External database user.
#    (OPTIONAL) / (DEFAULT: "onedev")
# onedev_database_user: "onedev"

# -- External database password.
#    (REQUIRED if onedev_database_type is set)
# onedev_database_password: ""

# ==============================================================================
# ONEDEV ADVANCED CONFIGURATION
# ==============================================================================

# -- SSH service port for git operations.
#    (OPTIONAL) / (DEFAULT: 6611)
#    NOTE: If you need SSH access, configure split-DNS or expose via LoadBalancer
# onedev_ssh_port: 6611

# -- Resource limits for OneDev container.
#    (OPTIONAL) / Defaults below are suitable for small-medium deployments
# onedev_cpu_limit: "2000m"
# onedev_memory_limit: "4Gi"
# onedev_cpu_request: "500m"
# onedev_memory_request: "2Gi"

# ==============================================================================
# WORKOS AUTHKIT (Optional - OAuth 2.1 / MCP Authentication)
# ==============================================================================
# WorkOS AuthKit provides MCP 2025-11-25 compliant authorization.
# Supports CIMD, RFC 8707, Cross App Access, and enterprise SSO.
# REF: https://workos.com/docs/authkit/mcp

# -- WorkOS Client ID (from WorkOS Dashboard).
#    (REQUIRED for WorkOS integration)
# workos_client_id: "client_xxx"

# -- WorkOS Client Secret (from WorkOS Dashboard).
#    (REQUIRED for WorkOS integration) - Will be encrypted with SOPS
# workos_client_secret: "sk_live_xxx"

# -- WorkOS AuthKit subdomain (your-subdomain.authkit.app).
#    (REQUIRED for WorkOS integration)
#    Example: "mycompany" for mycompany.authkit.app
# workos_subdomain: ""

# ==============================================================================
# KEYCLOAK CONFIGURATION (Optional - OIDC Authentication Provider)
# ==============================================================================
# Keycloak provides enterprise-grade identity and access management.
# Integrates with Envoy Gateway via SecurityPolicy for OIDC authentication.
# REF: docs/keycloak-envoy-gateway-integration-research.md

# -- Enable Keycloak deployment.
#    (OPTIONAL) / (DEFAULT: false)
# keycloak_enabled: true

# -- Keycloak admin password.
#    (REQUIRED if keycloak_enabled) - Will be encrypted with SOPS
# keycloak_admin_password: "your-secure-password"

# -- PostgreSQL database password for Keycloak.
#    (REQUIRED if keycloak_enabled) - Will be encrypted with SOPS
# keycloak_db_password: "your-db-password"

# -- Number of Keycloak replicas for HA.
#    (OPTIONAL) / (DEFAULT: 2)
# keycloak_replicas: 2

# -- OIDC client secret for Envoy Gateway integration.
#    (REQUIRED if keycloak_enabled) - Will be created in Keycloak after deployment
#    NOTE: Generate this value after configuring Keycloak realm and client.
#    Leave as placeholder until Keycloak is running and client is configured.
# keycloak_oidc_client_secret: "REPLACE_AFTER_KEYCLOAK_SETUP"

# -- Cookie domain for SSO across subdomains.
#    (OPTIONAL) - Set to "yourdomain.com" for cross-subdomain SSO
#    NOTE: Do NOT include leading dot - modern browsers treat both identically
#    Example: "example.com" to share sessions across *.example.com
# keycloak_oidc_cookie_domain: "example.com"

# ==============================================================================
# KEYCLOAK POSTGRESQL CONFIGURATION
# ==============================================================================

# -- Enable built-in CloudNativePG PostgreSQL for Keycloak.
#    (OPTIONAL) / (DEFAULT: true)
#    Set to false if using external PostgreSQL.
# keycloak_postgresql_enabled: true

# -- Number of PostgreSQL replicas.
#    (OPTIONAL) / (DEFAULT: 3)
#    NOTE: Use odd numbers for quorum (1, 3, 5)
# keycloak_postgresql_replicas: 3

# -- PostgreSQL storage size.
#    (OPTIONAL) / (DEFAULT: "10Gi")
# keycloak_postgresql_storage_size: "10Gi"

# ==============================================================================
# KEYCLOAK RESOURCE LIMITS
# ==============================================================================

# -- Keycloak resource requests.
#    (OPTIONAL) / (DEFAULTs shown)
# keycloak_cpu_request: "250m"
# keycloak_memory_request: "512Mi"

# -- Keycloak resource limits.
#    (OPTIONAL) / (DEFAULTs shown)
# keycloak_cpu_limit: "1000m"
# keycloak_memory_limit: "1Gi"

# ==============================================================================
# KEYCLOAK ENTRA ID IDENTITY PROVIDER (Optional - Federation with Microsoft)
# ==============================================================================
# Configure Microsoft Entra ID as an external identity provider in Keycloak.
# Users will be able to "Sign in with Microsoft" using their organizational accounts.
# REF: https://blog.ght1pc9kc.fr/en/2023/configure-azure-entra-id-as-idp-on-keycloak/

# -- Enable Microsoft Entra ID as an identity provider.
#    (OPTIONAL) / (DEFAULT: false)
#    When enabled, users will see a "Microsoft Entra ID" button on the Keycloak login page.
# keycloak_entra_id_enabled: true

# -- Azure Entra ID Tenant ID (Directory ID).
#    (REQUIRED if keycloak_entra_id_enabled) - From Azure Portal → Entra ID → Overview
#    Format: GUID (e.g., "12345678-1234-1234-1234-123456789abc")
# keycloak_entra_id_tenant_id: ""

# -- Azure App Registration Client ID (Application ID).
#    (REQUIRED if keycloak_entra_id_enabled) - From Azure Portal → App Registrations
#    NOTE: Create a new app registration:
#      1. Go to Azure Portal → Microsoft Entra ID → App Registrations → New Registration
#      2. Name: "Keycloak" (or your preferred name)
#      3. Supported account types: "Accounts in this organizational directory only"
#      4. Redirect URI: https://auth.<your-domain>/realms/k8s-cluster/broker/entra-id/endpoint
#    Format: GUID (e.g., "12345678-1234-1234-1234-123456789abc")
# keycloak_entra_id_client_id: ""

# -- Azure App Registration Client Secret.
#    (REQUIRED if keycloak_entra_id_enabled) - Will be encrypted with SOPS
#    NOTE: Create client secret:
#      1. In your app registration → Certificates & secrets → New client secret
#      2. Copy the Value (NOT the Secret ID) immediately - it's only shown once!
# keycloak_entra_id_client_secret: ""

# ==============================================================================
# AGENTGATEWAY CONFIGURATION (Optional - MCP 2025-11-25 OAuth Proxy)
# ==============================================================================
# agentgateway wraps Keycloak to provide MCP spec-compliant OAuth.
# Required for MCP clients that need DCR/CIMD support.
# REF: https://agentgateway.dev/docs/mcp/mcp-authn/

# -- Enable agentgateway for MCP authentication.
#    (OPTIONAL) / (DEFAULT: false)
# agentgateway_enabled: true

# -- Load balancer IP for agentgateway.
#    (REQUIRED if agentgateway_enabled) - Must be an UNUSED IP within node_cidr
#    Example: "192.168.1.147"
# agentgateway_addr: ""

# -- agentgateway MCP scopes.
#    (OPTIONAL) / (DEFAULT: ["openid", "profile", "email", "offline_access"])
# agentgateway_scopes:
#   - openid
#   - profile
#   - email
#   - offline_access

# ==============================================================================
# OBOT CONFIGURATION (Optional - Multi-Tenant MCP Gateway)
# ==============================================================================
# obot is a self-hosted AI agent platform that provides a multi-tenant MCP gateway.
# It integrates directly with Microsoft Entra ID for authentication.
# REF: https://github.com/jrmatherly/obot-entraid
# REF: docs/obot-entraid-implementation-guide.md

# -- Enable obot MCP gateway deployment.
#    (OPTIONAL) / (DEFAULT: false)
# obot_enabled: true

# -- Obot hostname (subdomain).
#    (OPTIONAL) / (DEFAULT: "obot")
#    Results in obot.<primary_domain>
# obot_hostname: "obot"

# ==============================================================================
# OBOT POSTGRESQL CONFIGURATION
# ==============================================================================

# -- PostgreSQL host for obot.
#    (OPTIONAL) - Leave empty to use CloudNativePG (recommended)
# obot_postgres_host: ""

# -- PostgreSQL database name.
#    (OPTIONAL) / (DEFAULT: "obot")
# obot_postgres_db: "obot"

# -- PostgreSQL username.
#    (OPTIONAL) / (DEFAULT: "obot")
# obot_postgres_user: "obot"

# -- PostgreSQL password for obot database.
#    (REQUIRED if obot_enabled) - Will be encrypted with SOPS
#    Generate with: openssl rand -base64 24
# obot_postgres_password: ""

# ==============================================================================
# OBOT MCP SERVER CONFIGURATION
# ==============================================================================

# -- Namespace for dynamically created MCP servers.
#    (OPTIONAL) / (DEFAULT: "obot-mcp")
# obot_mcp_namespace: "obot-mcp"

# ==============================================================================
# OBOT SECRETS
# ==============================================================================

# -- Session cookie secret (32 bytes base64).
#    (REQUIRED if obot_enabled) - Will be encrypted with SOPS
#    Generate with: openssl rand -base64 32
# obot_cookie_secret: ""

# -- Custom encryption key for data at rest (32 bytes base64).
#    (OPTIONAL) - Will be encrypted with SOPS
#    Generate with: openssl rand -base64 32
# obot_encryption_key: ""

# -- Initial admin bootstrap token.
#    (OPTIONAL) - For initial setup without SSO
#    Generate with: openssl rand -hex 16
# obot_bootstrap_token: ""

# ==============================================================================
# OBOT ENTRA ID AUTHENTICATION
# ==============================================================================
# Configure Microsoft Entra ID for native obot authentication.
# NOTE: This creates a separate Azure App Registration from Keycloak's.

# -- Azure Entra ID Tenant ID for obot.
#    (REQUIRED if obot_enabled)
#    Format: GUID (e.g., "12345678-1234-1234-1234-123456789abc")
# obot_entra_tenant_id: ""

# -- Azure App Registration Client ID for obot.
#    (REQUIRED if obot_enabled)
#    NOTE: Create app registration with:
#      - Redirect URI: https://obot.<domain>/oauth2/callback
#      - API Permissions: Microsoft Graph → User.Read, email, openid, profile
# obot_entra_client_id: ""

# -- Azure App Registration Client Secret for obot.
#    (REQUIRED if obot_enabled) - Will be encrypted with SOPS
# obot_entra_client_secret: ""

# ==============================================================================
# OBOT USER MANAGEMENT
# ==============================================================================

# -- Comma-separated list of admin email addresses.
#    (OPTIONAL) - Users with full administrative access
#    Example: "admin@example.com,devops@example.com"
# obot_admin_emails: ""

# -- Comma-separated list of owner email addresses.
#    (OPTIONAL) - Users with owner-level access (above admin)
#    Example: "cto@example.com"
# obot_owner_emails: ""

# ==============================================================================
# OBOT STORAGE CONFIGURATION
# ==============================================================================

# -- Storage size for obot data PVC.
#    (OPTIONAL) / (DEFAULT: "20Gi")
# obot_storage_size: "20Gi"

# -- Storage class for obot PVC.
#    (OPTIONAL) / (DEFAULT: "proxmox-csi")
# obot_storage_class: "proxmox-csi"

# ==============================================================================
# OBOT RESOURCE LIMITS
# ==============================================================================

# -- Number of obot replicas.
#    (OPTIONAL) / (DEFAULT: 1)
#    NOTE: Limited to 1 when using RWO storage
# obot_replicas: 1

# -- CPU request for obot container.
#    (OPTIONAL) / (DEFAULT: "500m")
# obot_cpu_request: "500m"

# -- CPU limit for obot container.
#    (OPTIONAL) / (DEFAULT: "2000m")
# obot_cpu_limit: "2000m"

# -- Memory request for obot container.
#    (OPTIONAL) / (DEFAULT: "1Gi")
# obot_memory_request: "1Gi"

# -- Memory limit for obot container.
#    (OPTIONAL) / (DEFAULT: "4Gi")
# obot_memory_limit: "4Gi"

# ==============================================================================
# OBOT ADVANCED CONFIGURATION
# ==============================================================================

# -- Encryption provider for data at rest.
#    (OPTIONAL) / (DEFAULT: "custom")
#    Options: "custom", "azure-keyvault", "aws-kms", "gcp-kms"
# obot_encryption_provider: "custom"

# -- Use existing envoy-ai gateway for LLM requests.
#    (OPTIONAL) / (DEFAULT: true)
#    Set to false if configuring model providers directly in obot
# obot_use_ai_gateway: true

# ==============================================================================
# KAGENT CONFIGURATION (Optional - Kubernetes-native AI Agent Framework)
# ==============================================================================
# kagent is a CNCF sandbox project for building, deploying, and managing AI agents
# in Kubernetes. It provides declarative Agent/ModelConfig CRDs, pre-built agents
# (k8s, helm, cilium, observability), and MCP server orchestration via kmcp.
# REF: https://kagent.dev/docs/kagent/
# REF: docs/kagent-implementation-guide.md

# -- Enable kagent deployment.
#    (OPTIONAL) / (DEFAULT: false)
# kagent_enabled: true

# -- LLM provider for kagent agents.
#    (OPTIONAL) / (DEFAULT: "anthropic")
#    Options: "anthropic", "openai", "azure", "gemini", "ollama"
# kagent_provider: "anthropic"

# -- Default model name for agents.
#    (OPTIONAL) / (DEFAULT: "claude-3-5-haiku")
#    Examples: "claude-3-5-haiku", "gpt-4o", "gemini-pro"
# kagent_default_model: "claude-3-5-haiku"

# -- Anthropic API key (required if kagent_provider=anthropic).
#    (REQUIRED if using Anthropic) - Will be encrypted with SOPS
# kagent_anthropic_api_key: "sk-ant-xxx"

# -- OpenAI API key (required if kagent_provider=openai).
#    (REQUIRED if using OpenAI) - Will be encrypted with SOPS
# kagent_openai_api_key: "sk-xxx"

# -- OpenAI-compatible API base URL (for routing through Envoy AI Gateway).
#    (OPTIONAL) - Use this to route kagent requests through the AI Gateway
#    Example: "https://llms.<your-domain>/v1"
# kagent_openai_api_base: ""

# -- Google Gemini API key (required if kagent_provider=gemini).
#    (REQUIRED if using Gemini) - Will be encrypted with SOPS
# kagent_gemini_api_key: ""

# -- Azure OpenAI endpoint (required if kagent_provider=azure).
#    (REQUIRED if using Azure) - Your Azure OpenAI resource endpoint
#    Example: "https://your-resource.openai.azure.com"
# kagent_azure_endpoint: ""

# -- Azure OpenAI deployment name (required if kagent_provider=azure).
#    (REQUIRED if using Azure) - The deployment name for your model
# kagent_azure_deployment: ""

# -- Ollama host URL (required if kagent_provider=ollama).
#    (OPTIONAL) / (DEFAULT: "ollama.ollama.svc.cluster.local:11434")
#    Example: "http://localhost:11434" for local Ollama
# kagent_ollama_host: "ollama.ollama.svc.cluster.local:11434"

# ==============================================================================
# KAGENT UI CONFIGURATION
# ==============================================================================

# -- Enable kagent web UI.
#    (OPTIONAL) / (DEFAULT: true)
#    The UI provides chat interface and agent management at kagent.<domain>
# kagent_ui_enabled: true

# -- Number of UI replicas.
#    (OPTIONAL) / (DEFAULT: 1)
# kagent_ui_replicas: 1

# ==============================================================================
# KAGENT CONTROLLER CONFIGURATION
# ==============================================================================

# -- Number of controller replicas.
#    (OPTIONAL) / (DEFAULT: 1)
# kagent_controller_replicas: 1

# -- Controller log level.
#    (OPTIONAL) / (DEFAULT: "info")
#    Options: "debug", "info", "warn", "error"
# kagent_controller_log_level: "info"

# ==============================================================================
# KAGENT PRE-BUILT AGENTS
# ==============================================================================

# -- List of pre-built agents to enable.
#    (OPTIONAL) / (DEFAULT: ["k8s", "helm", "observability"])
#    Available agents: k8s, helm, cilium-debug, cilium-policy, cilium-manager,
#                      istio, kgateway, observability, promql, argo-rollouts
# kagent_agents_enabled:
#   - k8s
#   - helm
#   - observability

# -- Enable write operations for k8s-agent.
#    (OPTIONAL) / (DEFAULT: false)
#    WARNING: When true, k8s-agent can delete pods, patch deployments, etc.
#    Only enable this if you trust the agent's judgment for remediation actions.
# kagent_write_operations_enabled: false

# ==============================================================================
# KAGENT OBSERVABILITY (OpenTelemetry Tracing)
# ==============================================================================

# -- Enable OpenTelemetry tracing for agent operations.
#    (OPTIONAL) / (DEFAULT: false)
#    NOTE: Requires a tracing backend (Jaeger, Tempo, or OpenTelemetry Collector)
# kagent_otlp_enabled: false

# -- OTLP endpoint for trace collection.
#    (OPTIONAL) - Only used if kagent_otlp_enabled=true
#    Example with Jaeger: "http://jaeger-collector.jaeger.svc.cluster.local:4317"
#    Example with Tempo: "http://tempo.observability.svc.cluster.local:4317"
#    NOTE: kube-prometheus-stack does NOT natively expose OTLP - use Jaeger or Tempo
# kagent_otlp_endpoint: "http://jaeger-collector.jaeger.svc.cluster.local:4317"

# ==============================================================================
# KAGENT DATABASE CONFIGURATION
# ==============================================================================

# -- Database type for kagent.
#    (OPTIONAL) / (DEFAULT: "sqlite")
#    Options: "sqlite", "postgresql"
#    NOTE: When "postgresql" is selected, a CloudNativePG cluster is deployed
#    automatically. No external database is required.
# kagent_database_type: "sqlite"

# -- PostgreSQL database user (if kagent_database_type=postgresql).
#    (OPTIONAL) / (DEFAULT: "kagent")
#    The CNPG bootstrap process uses this for the database owner.
# kagent_postgres_user: "kagent"

# -- PostgreSQL database password (if kagent_database_type=postgresql).
#    (REQUIRED if postgresql) - Will be encrypted with SOPS
#    Password for the kagent PostgreSQL user.
# kagent_postgres_password: ""

# -- CNPG PostgreSQL cluster replicas (if kagent_database_type=postgresql).
#    (OPTIONAL) / (DEFAULT: 3)
#    Number of PostgreSQL instances in the CNPG cluster for HA.
# kagent_postgresql_replicas: 3

# -- CNPG PostgreSQL storage size (if kagent_database_type=postgresql).
#    (OPTIONAL) / (DEFAULT: "10Gi")
#    Storage size for each PostgreSQL instance.
# kagent_postgresql_storage_size: "10Gi"

# ==============================================================================
# KAGENT MCP SERVER CONTROLLER (kmcp)
# ==============================================================================

# -- Enable kmcp controller for MCPServer CRD management.
#    (OPTIONAL) / (DEFAULT: true)
#    kmcp deploys and manages MCP servers declaratively via MCPServer CRD
# kagent_kmcp_enabled: true
