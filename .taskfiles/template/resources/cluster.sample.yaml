---
# ==============================================================================
# CLUSTER CONFIGURATION
# ==============================================================================
# This file defines the core settings for your Talos Kubernetes cluster.
# Fill in the REQUIRED fields and optionally customize the others.
#
# TIP: Use 'task configure' to validate and render your configuration.
# ==============================================================================

# ==============================================================================
# NETWORK CONFIGURATION
# ==============================================================================

# -- The network CIDR that contains your node IP addresses.
#    This is the subnet where your Talos nodes will be assigned IPs.
#    (REQUIRED)
#    Example: "192.168.1.0/24" for a typical home network
#    Example: "10.0.0.0/24" for a private network
node_cidr: ""

# -- DNS servers for the Talos nodes to use for external resolution.
#    These are used by the nodes themselves, not for cluster DNS.
#    Public DNS servers from this list are also used as fallback for k8s_gateway.
#    (OPTIONAL) / (DEFAULT: ["1.1.1.1", "1.0.0.1"] - Cloudflare DNS)
#    Example: ["192.168.1.1", "1.1.1.1"] - Local router + Cloudflare
#    Example: ["172.64.36.x", "172.64.36.x"] - Cloudflare for Personal Resolvers
# node_dns_servers: []

# -- NTP servers for time synchronization on Talos nodes.
#    Accurate time is critical for certificate validation and cluster operations.
#    (OPTIONAL) / (DEFAULT: ["162.159.200.1", "162.159.200.123"] - Cloudflare NTP)
# node_ntp_servers: []

# -- The default gateway (router) IP for the nodes.
#    (OPTIONAL) / (DEFAULT: First usable IP in node_cidr, e.g., .1)
#    Only set this if your gateway is NOT the first IP in your subnet.
#    Example: "192.168.1.254" if your router uses .254 instead of .1
# node_default_gateway: ""

# -- VLAN tag for Talos node network interfaces.
#    Only needed if your nodes are on a tagged VLAN and your switch ports are NOT tagged.
#    (OPTIONAL) / (REF: https://www.talos.dev/latest/advanced/advanced-networking/#vlans)
#    Example: "100" for VLAN ID 100
# node_vlan_tag: ""

# ==============================================================================
# KUBERNETES CLUSTER SETTINGS
# ==============================================================================

# -- Virtual IP address for the Kubernetes API server.
#    This IP is shared across control plane nodes for high availability.
#    (REQUIRED) - Must be an UNUSED IP within node_cidr
#    TIP: Choose an IP outside the range you'll assign to nodes.
#    Example: If nodes are .101-.106, use .100 for the API
cluster_api_addr: ""

# -- Additional hostnames/IPs to include in the API server certificate.
#    Useful if you want to access the cluster by hostname or external IP.
#    (OPTIONAL)
#    Example: ["k8s.example.com", "192.168.1.200"]
# cluster_api_tls_sans: []

# -- Pod network CIDR for internal pod-to-pod communication.
#    Must NOT overlap with node_cidr or cluster_svc_cidr.
#    (OPTIONAL) / (DEFAULT: "10.42.0.0/16" - 65,536 pod IPs)
#    WARNING: Changing this after cluster creation requires a full rebuild.
# cluster_pod_cidr: ""

# -- Service network CIDR for Kubernetes ClusterIP services.
#    Must NOT overlap with node_cidr or cluster_pod_cidr.
#    (OPTIONAL) / (DEFAULT: "10.43.0.0/16" - 65,536 service IPs)
#    WARNING: Changing this after cluster creation requires a full rebuild.
# cluster_svc_cidr: ""

# ==============================================================================
# LOAD BALANCER IPS (Cilium L2/BGP Announcements)
# ==============================================================================
# These IPs are announced by Cilium and used for LoadBalancer services.
# All must be UNUSED IPs within node_cidr.

# -- IP for k8s_gateway DNS service (internal DNS resolution).
#    Configure your router/DNS server to forward your domain queries here.
#    This enables split-DNS so internal services resolve to internal IPs.
#    (REQUIRED) - Must be an UNUSED IP within node_cidr
#    TIP: See docs/udm-split-dns.md for router configuration examples.
cluster_dns_gateway_addr: ""

# -- IP for the internal ingress gateway (envoy-internal).
#    Used for services only accessible from your local network.
#    (REQUIRED) - Must be an UNUSED IP within node_cidr
cluster_gateway_addr: ""

# -- IP for the external ingress gateway (envoy-external via Cloudflare Tunnel).
#    Used for services accessible from the public internet.
#    (REQUIRED) - Must be an UNUSED IP within node_cidr
cloudflare_gateway_addr: ""

# ==============================================================================
# GITHUB REPOSITORY SETTINGS
# ==============================================================================

# -- Your GitHub repository in "owner/repo" format.
#    This is where Flux will sync cluster state from.
#    (REQUIRED)
#    Example: "myusername/my-k8s-cluster"
repository_name: ""

# -- Git branch for Flux to monitor.
#    (OPTIONAL) / (DEFAULT: "main")
# repository_branch: ""

# -- Repository visibility setting.
#    (OPTIONAL) / (DEFAULT: "public")
#    NOTE: If "private", you must add github-deploy.key.pub to your repo's deploy keys.
#    See README for detailed instructions.
# repository_visibility: ""

# ==============================================================================
# CLOUDFLARE SETTINGS
# ==============================================================================

# -- Your Cloudflare domain(s) for the cluster.
#    Can be a single domain string or an array of domains.
#    First domain is primary (used for flux-webhook, internal infrastructure).
#    (REQUIRED)
#    Single domain example: "example.com"
#    Multiple domains example: ["example.com", "example.org"]
#
#    In templates, domains are available as:
#      ${SECRET_DOMAIN}   - Primary domain (first in list)
#      ${SECRET_DOMAIN_2} - Second domain
#      ${SECRET_DOMAIN_3} - Third domain, etc.
cloudflare_domain: ""

# -- Cloudflare API Token with required permissions.
#    (REQUIRED) - See README "Stage 3: Cloudflare configuration" for creation steps.
#    Required permissions:
#      - Zone:DNS:Edit (from template)
#      - Account:Cloudflare Tunnel:Read (add manually)
#    TIP: Create token at: Cloudflare Portal → Manage Account → Account API Tokens
cloudflare_token: ""
# ==============================================================================
# CILIUM NETWORKING (Advanced)
# ==============================================================================

# -- Load balancer mode for Cilium.
#    DSR (Direct Server Return) is more efficient but requires compatible network.
#    SNAT works in all environments but adds latency.
#    (OPTIONAL) / (DEFAULT: "dsr")
#    Values: "dsr" or "snat"
#    REF: https://docs.cilium.io/en/stable/network/kubernetes/kubeproxy-free/
# cilium_loadbalancer_mode: ""

# -- BGP Configuration (for advanced networking setups)
#    Enable BGP peering with your router for dynamic route advertisement.
#    All three BGP settings must be configured together to enable BGP.
#    (OPTIONAL) - Only needed if your router supports BGP
#    REF: https://docs.cilium.io/en/latest/network/bgp-control-plane/

# -- BGP router IP address (your router's IP that speaks BGP)
#    Example: "192.168.1.1"
# cilium_bgp_router_addr: ""

# -- BGP ASN for your router
#    Example: "64512"
# cilium_bgp_router_asn: ""

# -- BGP ASN for Kubernetes nodes
#    Example: "64513"
# cilium_bgp_node_asn: ""

# ==============================================================================
# PROXMOX INTEGRATION (Optional)
# ==============================================================================
# Configuration for Proxmox CSI Plugin (and optionally CCM).
# Required if deploying persistent storage via Proxmox CSI.
# REF: docs/proxmox-csi-implementation.md

# -- Proxmox API URL for CSI (and CCM if using Approach B) communication.
#    (REQUIRED for Proxmox integration)
#    Example: "https://192.168.1.10:8006/api2/json"
# proxmox_api_url: ""

# -- Skip TLS certificate verification for self-signed Proxmox certs.
#    (OPTIONAL) / (DEFAULT: true)
# proxmox_insecure: true

# -- Proxmox region name (identifies the Proxmox cluster).
#    Used for topology.kubernetes.io/region label.
#    (OPTIONAL) / (DEFAULT: "talos-k8s")
# proxmox_region: ""

# -- Proxmox storage pool name for CSI volumes.
#    Must support disk images (e.g., local-lvm, local-zfs, ceph).
#    (OPTIONAL) / (DEFAULT: "local-lvm")
# proxmox_storage: ""

# -- Proxmox CSI API Token ID (from step 1.4 of implementation guide)
#    (REQUIRED for CSI) Format: "user@realm!token-name"
#    Example: "kubernetes-csi@pve!csi"
# proxmox_csi_token_id: ""

# -- Proxmox CSI API Token Secret
#    (REQUIRED for CSI) - The secret value from token creation
# proxmox_csi_token_secret: ""

# -- Proxmox CCM API Token ID (from step 1.3 of implementation guide)
#    (REQUIRED for Approach B only) Format: "user@realm!token-name"
#    Example: "kubernetes-ccm@pve!ccm"
#    NOTE: Skip if using Approach A (Static Labels)
# proxmox_ccm_token_id: ""

# -- Proxmox CCM API Token Secret
#    (REQUIRED for Approach B only) - The secret value from token creation
#    NOTE: Skip if using Approach A (Static Labels)
# proxmox_ccm_token_secret: ""

# ==============================================================================
# KGATEWAY / AGENTGATEWAY INTEGRATION (Optional - AI/LLM Infrastructure)
# ==============================================================================
# Configuration for Kgateway with AgentGateway for AI/LLM gateway capabilities.
# Enables routing to LLM providers (Azure OpenAI, OpenAI, Anthropic) and MCP servers.
# REF: docs/kgateway-research/advanced/IMPLEMENTATION-PLAN.md

# -- Load balancer IP for AgentGateway (AI workloads).
#    (REQUIRED for Kgateway) - Must be an UNUSED IP within node_cidr
#    Example: "192.168.1.145"
# agentgateway_addr: ""

# -- Enable AgentGateway observability (ServiceMonitor, access logs, PrometheusRules).
#    When enabled, deploys Prometheus metrics scraping, JSON access logging,
#    alerting rules, and official Kgateway Grafana dashboards.
#    (OPTIONAL) / (DEFAULT: true when agentgateway_addr is set)
# agentgateway_observability_enabled: true

# -- OpenTelemetry collector endpoint for distributed tracing.
#    Enables OTLP tracing export from the agentgateway proxy.
#    (OPTIONAL) - Only needed if you have an OTLP collector deployed
#    Example: "otel-collector.monitoring:4317"
# otel_collector_endpoint: ""

# -----------------------------------------------------------------------------
# Enhancement Settings
# -----------------------------------------------------------------------------
# -- Enable prompt guards (PII/sensitive data blocking and masking)
#    (OPTIONAL) / (DEFAULT: true)
# agentgateway_prompt_guard_enabled: true

# -- Enable rate limiting per backend
#    (OPTIONAL) / (DEFAULT: true)
# agentgateway_rate_limit_enabled: true

# -----------------------------------------------------------------------------
# Azure OpenAI - East US2 (Primary Region)
# -----------------------------------------------------------------------------
# Resource name and shared API key for all East US2 backends
# azure_openai_eastus2_resource_name: "my-openai-resource"
# azure_openai_eastus2_api_key: ""

# Chat/Completions Backend (gpt-5, gpt-5-chat, gpt-5-nano)
# azure_openai_eastus2_chat_deployment_name: "gpt-5"
# azure_openai_eastus2_chat_api_version: "2025-01-01-preview"

# Responses Backend (gpt-5.1, codex models)
# azure_openai_eastus2_responses_deployment_name: "gpt-5.1"
# azure_openai_eastus2_responses_api_version: "2025-04-01-preview"

# Embeddings Backend (text-embedding-3-large)
# azure_openai_eastus2_embeddings_deployment_name: "text-embedding-3-large"
# azure_openai_eastus2_embeddings_api_version: "2023-05-15"

# Realtime Backend (gpt-realtime, gpt-realtime-mini)
# azure_openai_eastus2_realtime_deployment_name: "gpt-realtime"
# azure_openai_eastus2_realtime_api_version: "2024-10-01-preview"

# Images Backend (gpt-image-1)
# azure_openai_eastus2_images_deployment_name: "gpt-image-1"
# azure_openai_eastus2_images_api_version: "2025-04-01-preview"

# Audio Backend (gpt-audio, gpt-audio-mini)
# azure_openai_eastus2_audio_deployment_name: "gpt-audio"
# azure_openai_eastus2_audio_api_version: "2025-01-01-preview"

# -----------------------------------------------------------------------------
# Azure OpenAI - East US (Secondary Region)
# -----------------------------------------------------------------------------
# azure_openai_eastus_resource_name: "aanopenai"
# azure_openai_eastus_api_key: ""

# Chat Backend (gpt-4.1, gpt-4o-mini, o3, o4-mini)
# azure_openai_eastus_chat_deployment_name: "gpt-4.1"
# azure_openai_eastus_chat_api_version: "2025-01-01-preview"

# Embeddings Backend (text-embedding-3-small, ada-002)
# azure_openai_eastus_embeddings_deployment_name: "text-embedding-3-small"
# azure_openai_eastus_embeddings_api_version: "2023-05-15"

# -----------------------------------------------------------------------------
# Azure AI Foundry - Anthropic Claude
# -----------------------------------------------------------------------------
# azure_anthropic_resource_name: "my-ai-foundry-resource"
# azure_anthropic_api_key: ""

# -----------------------------------------------------------------------------
# Azure AI Models - Cohere Rerank (dedicated endpoint)
# -----------------------------------------------------------------------------
# azure_cohere_rerank_host: "my-cohere-rerank.eastus.models.ai.azure.com"
# azure_cohere_rerank_api_key: ""

# -----------------------------------------------------------------------------
# Azure AI Services - Cohere Embed (OpenAI-compatible)
# -----------------------------------------------------------------------------
# azure_cohere_embed_host: "my-ai-services.services.ai.azure.com"
# azure_cohere_embed_api_key: ""

# -----------------------------------------------------------------------------
# Direct Provider APIs (non-Azure)
# -----------------------------------------------------------------------------
# -- OpenAI API Key (for direct OpenAI routing)
#    (OPTIONAL) - Only needed if routing to OpenAI directly
# openai_api_key: ""

# -- Anthropic API Key (for Claude routing)
#    (OPTIONAL) - Only needed if routing to Anthropic directly
# anthropic_api_key: ""
